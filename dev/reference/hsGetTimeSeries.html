<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get Time Series With Timestamp Info — hsGetTimeSeries • kwb.db</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Get Time Series With Timestamp Info — hsGetTimeSeries" />
<meta property="og:description" content="Reads time-series data from an MS Access database table and returns a data
frame containing the data. In the data frame the timestamp column contains
the timestamps as they are converted to by R from (text versions of) the
original timestamps read from MS ACCESS. As this conversion may fail (e.g.
the time information gets lost when transferring timestamps from large data
sets between R and MS Access) this function may return different pieces of
information on the timestamp in forms of additional columns, preceding the
timestamp column, in the result data frame. Per default, eleven additional
columns are returned: 1. &amp;lt;ts&amp;gt;_txt (timestamp as text), 2. &amp;lt;ts&amp;gt;_Date (date
only), 3. &amp;lt;ts&amp;gt;_dSince18991230 (number of days since 1899-12-30), 4.
&amp;lt;ts&amp;gt;_secInDay (number of seconds within the day), 5. &amp;lt;ts&amp;gt;_minInDay (number of
minutes within the day), 6. &amp;lt;ts&amp;gt;_year (year), 7. &amp;lt;ts&amp;gt;_month (number of
month), 8. &amp;lt;ts&amp;gt;_day (number of day within the month), 9. &amp;lt;ts&amp;gt;_h (hours within
day), 10. &amp;lt;ts&amp;gt;_min (minutes within hour), 11. &amp;lt;ts&amp;gt;_s (seconds within minute) 
where in each case &amp;lt;ts&amp;gt; is the name of the timestamp field." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kwb.db</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.4.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/KWB-R/kwb.db/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get Time Series With Timestamp Info</h1>
    <small class="dont-index">Source: <a href='https://github.com/KWB-R/kwb.db/blob/master/R/main.R'><code>R/main.R</code></a></small>
    <div class="hidden name"><code>hsGetTimeSeries.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Reads time-series data from an MS Access database table and returns a data
frame containing the data. In the data frame the timestamp column contains
the timestamps as they are converted to by R from (text versions of) the
original timestamps read from MS ACCESS. As this conversion may fail (e.g.
the time information gets lost when transferring timestamps from large data
sets between R and MS Access) this function may return different pieces of
information on the timestamp in forms of additional columns, preceding the
timestamp column, in the result data frame. Per default, eleven additional
columns are returned: 1. &lt;ts&gt;_txt (timestamp as text), 2. &lt;ts&gt;_Date (date
only), 3. &lt;ts&gt;_dSince18991230 (number of days since 1899-12-30), 4.
&lt;ts&gt;_secInDay (number of seconds within the day), 5. &lt;ts&gt;_minInDay (number of
minutes within the day), 6. &lt;ts&gt;_year (year), 7. &lt;ts&gt;_month (number of
month), 8. &lt;ts&gt;_day (number of day within the month), 9. &lt;ts&gt;_h (hours within
day), 10. &lt;ts&gt;_min (minutes within hour), 11. &lt;ts&gt;_s (seconds within minute) 
where in each case &lt;ts&gt; is the name of the timestamp field.</p>
    </div>

    <pre class="usage"><span class='fu'>hsGetTimeSeries</span>(
  <span class='no'>mdb</span>,
  <span class='no'>tbl</span>,
  <span class='kw'>tsField</span> <span class='kw'>=</span> <span class='fu'><a href='hsTsField.html'>hsTsField</a></span>(<span class='no'>mdb</span>, <span class='no'>tbl</span>),
  <span class='kw'>fields</span> <span class='kw'>=</span> <span class='st'>"*"</span>,
  <span class='kw'>minDate</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>maxDate</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>xTsFields</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>:<span class='fl'>11</span>),
  <span class='kw'>inclLast</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>sqlFilter</span> <span class='kw'>=</span> <span class='st'>"TRUE"</span>,
  <span class='kw'>dbg</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>mdb</th>
      <td><p>Full path to MS Access database file (*.mdb)</p></td>
    </tr>
    <tr>
      <th>tbl</th>
      <td><p>Name of table containing the time-series data.</p></td>
    </tr>
    <tr>
      <th>tsField</th>
      <td><p>Name of table field containing the timestamps.</p></td>
    </tr>
    <tr>
      <th>fields</th>
      <td><p>Vector containing names of value fields to be selected from the
table. This vector may or may not contain the name of the timetamp field.</p></td>
    </tr>
    <tr>
      <th>minDate</th>
      <td><p>Minimum date (and time) of time interval to be selected in
ISO-Syntax: yyyy-mm-dd [HH:MM:SS], where the part in brackets in optional.</p></td>
    </tr>
    <tr>
      <th>maxDate</th>
      <td><p>Day following the maximum date of the time interval to be
selected, in ISO-Syntax: yyyy-mm-dd [HH:MM:SS], where the part in brackets
in optional.</p></td>
    </tr>
    <tr>
      <th>xTsFields</th>
      <td><p>Extra timestamp fields to be selected. Vector containing
numbers between 1 and 11, where each number represents a type of date/time
information as described for function <code><a href='hsSqlExTsFields.html'>hsSqlExTsFields</a></code>.</p></td>
    </tr>
    <tr>
      <th>inclLast</th>
      <td><p>If TRUE, <em>maxDate</em> will be included in result data set,
else excluded.</p></td>
    </tr>
    <tr>
      <th>sqlFilter</th>
      <td><p>additional SQL filter criterion</p></td>
    </tr>
    <tr>
      <th>dbg</th>
      <td><p>if TRUE, debug messages are shown</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>data frame containing the requested data (timestamp and value
  columns) and additional columns preceding the timestamp column containing
  different pieces of information on the timestamp.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function is called internally by the higher-level function 
<code><a href='hsMdbTimeSeries.html'>hsMdbTimeSeries</a></code> that reconstructs the correct timestamps from
the different pieces of timestamp information and provides them in forms of
POSIXct objects in UTC timezone.</p>
<p>Use <code><a href='hsMdbTimeSeries.html'>hsMdbTimeSeries</a></code> instead if you do not want to care about
any timestamp conversion problems!</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='hsMdbTimeSeries.html'>hsMdbTimeSeries</a>, <a href='hsGetTable.html'>hsGetTable</a>,
  <a href='hsSqlExTsFields.html'>hsSqlExTsFields</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'>## Get flow time series of 24 of July 2011 from tbl_Hyd in example database</span>
<span class='co'>## Additionally to the timestamp that is created by R, return the date only</span>
<span class='co'>## (timestamp info id = 2) and the number of minutes within the day</span>
<span class='co'>## (timestamp info id = 5).</span>

<span class='fu'><a href='setCurrentSqlDialect.html'>setCurrentSqlDialect</a></span>(<span class='st'>"msaccess"</span>)

<span class='kw'>if</span> (<span class='no'>.Platform</span>$<span class='no'>OS.type</span> <span class='kw'>==</span> <span class='st'>"windows"</span>) {
  <span class='no'>ts</span> <span class='kw'>&lt;-</span> <span class='fu'>hsGetTimeSeries</span>(
    <span class='kw'>mdb</span> <span class='kw'>=</span> <span class='fu'><a href='xmdb.html'>xmdb</a></span>(),
    <span class='kw'>tbl</span> <span class='kw'>=</span> <span class='st'>"tbl_Hyd"</span>,
    <span class='kw'>tsField</span> <span class='kw'>=</span> <span class='st'>"Zeitst"</span>,
    <span class='kw'>fields</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Q"</span>, <span class='st'>"v"</span>),
    <span class='kw'>minDate</span> <span class='kw'>=</span> <span class='st'>"2011-08-24"</span>,
    <span class='kw'>maxDate</span> <span class='kw'>=</span> <span class='st'>"2011-08-25"</span>,
    <span class='kw'>xTsFields</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>, <span class='fl'>5</span>),
    <span class='kw'>dbg</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
  )

  <span class='co'>## Show the last records of the returned dataset.</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span>(<span class='no'>ts</span>)
}

<span class='co'>## Output:</span>
<span class='co'>#      Zeitst_Date Zeitst_minInDay              Zeitst     Q     v</span>
<span class='co'># 1435  2011-08-24            1435 2011-08-24 23:55:00 0.638 0.281</span>
<span class='co'># 1436  2011-08-24            1436 2011-08-24 23:56:00 0.601 0.265</span>
<span class='co'># 1437  2011-08-24            1437 2011-08-24 23:57:00 0.564 0.249</span>
<span class='co'># 1438  2011-08-24            1438 2011-08-24 23:58:00 0.536 0.237</span>
<span class='co'># 1439  2011-08-24            1439 2011-08-24 23:59:00 0.504 0.223</span>
<span class='co'># 1440  2011-08-25               0 2011-08-25 00:00:00 0.483 0.214</span>
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Hauke Sonnenberg.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'a2909cc57c21696b653e1258dfa00c5c',
    indexName: 'kwb_db',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


